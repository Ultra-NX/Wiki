# Блокировка серверов Nintendo

Эта страница поможет вам настроить метод для блокировки всей связи с Nintendo. Это остановит обновления и отчёты для Nintendo, но также помешает использовать eShop и онлайн-игры.

### **Инструкции (перенаправление DNS в AMS)**  
Вы можете настроить Atmosphère так, чтобы все запросы, направленные к Nintendo, перенаправлялись в никуда. Документацию по этой функции можно [найти здесь](https://github.com/Atmosphere-NX/Atmosphere/blob/master/docs/features/dns_mitm.md). Раздел ниже поможет вам настроить перенаправление DNS на вашем emuMMC. Обратите внимание, что это будет работать только при использовании CFW.

#### Что вам нужно:
- <a href="../../files/emummc.txt" download>emummc.txt</a>
- Atmosphère 0.18.0 или выше

#### Настройка:

1. Войдите в RCM и отправьте payload Hekate.
   - Если у вас модифицированная Switch, просто включите её с payload'ом Hekate, переименованным в `payload.bin` в корне вашей SD-карты.
2. Перейдите в `Tools` > `USB Tools` > `SD Card` и подключите консоль к ПК через USB.
3. Перейдите в папку `atmosphere`.
4. Если папка `hosts` ещё не существует, создайте её в папке `atmosphere`.
   - В итоге у вас должна быть директория `sd:/atmosphere/hosts`.
5. Скопируйте файл `emummc.txt` в папку hosts.
   - Если вы хотите применить перенаправление DNS для sysMMC, а не для emuMMC, переименуйте файл в `sysmmc.txt`.
6. Безопасно извлеките устройство `UMS` из операционной системы компьютера и загрузитесь в CFW.

!!! note "Проверка работоспособности"  
Вы можете проверить работоспособность перенаправления DNS, загрузившись в emuMMC (или sysMMC, если вы применили настройку к sys) и выключив консоль.

Отчёт будет создан в `sd:/atmosphere/logs` и будет называться `dns_mitm_startup.log`. Если он начинается с следующего, значит перенаправление DNS активно:

![dnsmitmlog](../extras/img/dnsmitm.png)


&nbsp;

### **Инструкции (90DNS)**  
Вы можете добавить кастомный DNS для вашего Wi-Fi-соединения, который заблокирует всю коммуникацию с серверами Nintendo. Мы будем использовать [90DNS](https://gitlab.com/a/90dns), сервер кастомных DNS, управляемый сообществом. Если вы предпочитаете, вы можете запустить собственный DNS-сервер, следуя инструкциям на [репозитории GitLab.](https://gitlab.com/a/90dns/blob/master/SELFHOST.md)

Перейдите в `Настройки системы` консоли, затем откройте вкладку `Интернет`. После этого:

#### **Настройка нового соединения через Wi-Fi**

!!! warning "Открытые Wi-Fi сети без пароля"  
Не все Wi-Fi сети требуют пароль для подключения. Если ваша сеть не использует пароль, вы можете использовать опцию `Ручная настройка`, которая находится в самом низу экрана `Интернет-настройки`, под всеми другими Wi-Fi сетями.

1. Выберите вашу Wi-Fi сеть из списка.
2. Введите **неправильный** пароль длиной 8 символов и нажмите `OK`.
3. После нескольких попыток подключения консоль отобразит ошибку соединения.
4. Нажмите `OK`, чтобы закрыть сообщение об ошибке.
5. Нажмите `Закрыть`, когда будет предложено отобразить дополнительные детали ошибки.
6. Когда вас спросят, хотите ли вы ввести пароль снова, выберите `Посмотреть настройки`.
7. Измените `Настройки DNS` на `Ручной`.
8. Выберите сервер, который находится ближе всего к вашему местоположению, из приведённой ниже таблицы, и введите его `Основной` и `Вторичный` DNS в настройки вашего соединения.
9. Введите правильный пароль для вашего Wi-Fi соединения.
10. Сохраните настройки и протестируйте соединение.

-----

#### **Редактирование существующего Wi-Fi соединения**
1. Выберите вашу существующую Wi-Fi сеть из списка.
2. Выберите `Изменить настройки`.
3. Выберите сервер, который находится ближе всего к вашему местоположению, из приведённой ниже таблицы, и введите его Основной и Вторичный DNS в настройки вашего соединения.
4. Сохраните настройки и протестируйте соединение.

-----

#### **Использование homebrew для настройки 90DNS на всех существующих Wi-Fi сетях**
1. Скачайте [switch-90dns-setter](https://github.com/suchmememanyskill/switch-90dns-setter/releases) и поместите его в папку `/switch`.
2. Запустите CFW и откройте меню homebrew.
3. Запустите `90DNS Setter`.
4. Нажмите X, чтобы применить 90DNS ко всем Wi-Fi сетям.
5. Нажмите Y, чтобы перезагрузить Switch.
6. Проверьте в настройках системы, применен ли кастомный DNS для сетей.



| Локация                              | Основной DNS      | Вторичный DNS     |
|:-------------------------------------|:------------------|:------------------|
| Европа (Сервер находится во Франции) | `163.172.141.219` | `207.246.121.77`  |
| Америка (Сервер находится в США)     | `207.246.121.77`  | `163.172.141.219` |


!!! tip ""  
    Пример подключения с 90DNS для настроек Европы:  
    ![Visual for System Settings serial location](../extras/img/blocking_updates.png)



&nbsp;

### **Тестирование, можно ли подключиться к серверам Nintendo**

#### **Тестирование через eShop (Stock)**
1. Откройте eShop. Подождите, пока он либо откроется, либо отобразит ошибку.
2. Если появляется сообщение "Невозможно отобразить страницу", похоже сервера Nintendo заблокированы.

#### **Тестирование через homebrew приложение (CFW)**
1. Скачайте последнюю версию [90DNS Tester](https://github.com/meganukebmp/Switch_90DNS_tester/releases)
2. Поместите файл `Switch_90DNS_tester.nro` в папку `switch` на вашей SD карте.
3. Перейдите в меню homebrew и запустите 90DNS Tester.
4. После завершения теста должно появиться изображение, подобное приведенному ниже, где каждый домен `nintendo` будет заблокирован.


!!! tip ""
    ![tester example](../extras/img/90dns_tester_switch.jpg)
