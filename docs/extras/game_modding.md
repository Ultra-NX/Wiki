# **Модификация игр(LFS)**


LayeredFS — это инструмент, встроенный в Atmosphere, который позволяет временно заменять файлы игры на ваши собственные, модифицированные файлы, если вы загружены в CFW.

### **Инструкции по использованию**

Посмотрите в раздел ниже, чтобы найти структуру папок/файлов вашего мода, а затем установите мод соответственно.

!!! note "**Проверка структуры папок/файлов**"
    * Если мод включает только папку `romfs` (и/или `exefs`), вам нужно поместить эту папку в `sd:/atmosphere/contents/<title_id>/`.
        - **Примечание:** Папку с title ID нужно создать вручную. Это зависит от игры, и title ID каждой игры можно найти на следующих сайтах: [switchbrew](https://switchbrew.org/wiki/Title_list/Games) и [nswdb](https://nswdb.com/).

    * Если мод включает только папку `contents`, вы можете просто скопировать эту папку в `sd:/atmosphere/` на вашу microSD карту и объединить папки, если будет предложено.

    * Если мод уже включает всю структуру папок (например, `atmosphere/contents/<title_id>/romfs`), вы можете просто скопировать папку `atmosphere` (вероятно, внутри `.zip` файла мода) в корень вашей microSD карты и объединить папки, если будет предложено.

    * Если мод включает только папку с titleID, вы можете просто скопировать эту папку в `sd:/atmosphere/contents` на вашу microSD карту.

!!! warning "Atmosphere 0.9.4 и ниже"
    **Примечание: в Atmosphère 0.9.4 и ниже папка `contents` называется `titles`**

На изображении ниже показан мод скин для Бэтмена, используемый в игре The Legend of Zelda: Breath of the Wild. В этом примере папка установки мода будет иметь следующий путь: `sd:/atmosphere/contents/0100509005AF2000/`.


![ExampleGameMod](../extras/img/game_modding.jpg)


-----

### **Примечания**

Папка `romfs` содержит модифицированные активы, как игра бы их обычно читала. `romfs` означает "romFileSystem" — это, по сути, файловая система игры (структура папок и файлов), которая используется внутри игры.

Если вы хотите отключить моды при запуске игры, удерживайте кнопку `L` перед запуском игры и запускайте её как обычно. Кнопка `L` — это стандартная кнопка для этого. Это отключит все модификации (например, читы и моды), которые вы настроили для игры.

Хотя большинство игр требуют только использования LayeredFS от Atmosphere для моддинга, есть игры, которые могут требовать более специализированной настройки. Например:

* Для моддинга Super Smash Bros. требуется [ARCropolis](https://github.com/Raytwo/ARCropolis/releases) и [skyline](https://github.com/skyline-dev/skyline/releases). Папка `exefs` Skyline помещается в каталог `atmosphere/contents/01006A800016E000/`. ARCropolis ищет моды в папке `sd:/ultimate/mods` на вашей microSD карте.

* Для моддинга Breath of the Wild и Tears of the Kingdom с несколькими модами требуется использование [BCML](https://github.com/NiceneNerd/BCML) или [UKMM](https://github.com/NiceneNerd/UKMM/releases) (рекомендуется) и [TKMM](https://github.com/TKMM-Team/Tkmm/releases) соответственно.

* Для моддинга Animal Crossing: New Horizons требуется дополнительная настройка. Папка, которая обычно называется `romfs`, должна быть переименована в `romFs`, и вам нужно создать пустой файл в `atmosphere/contents/01006F8002326000/romFs/System/Resource/` с названием `ResourceSizeTable.srsizetable`. Дополнительную информацию можно найти на [сайте ac-modding](https://ac-modding.com/ACNH/mods.html).


-----

### **Устранение неполадок**

#### **Моя игра вылетает при запуске!**
Если игра вылетает при запуске, удерживайте кнопку `L`, чтобы проверить, решает ли отключение всех модификаций проблему. Если это так, удалите последние добавленные моды для игры.

#### **Моих модов нет в игре!**
Если вы правильно следовали инструкциям по установке, вероятно, это связано с установленным архивным атрибутом на одну или несколько папок/файлов на вашей microSD карте. Это обычно происходит при копировании файлов на microSD карту с помощью Mac. Если вы сталкиваетесь с этой проблемой, попробуйте использовать утилиту для исправления архивного бита через Hekate для всех файлов.

Это можно сделать, загрузив Hekate и перейдя в `Tools` > `Arch bit • RCM Touch • Pkg1/2` > `Fix Archive Bit`.

