

# Отправка payload'a

!!! warning "Если вы здесь, чтобы проверить, уязвим ли ваш Switch"
    Убедитесь, что вы [перевели ваше устройство в режим RCM](entering_rcm.md) и скачали Hekate. Когда закончите, если ваша консоль **уязвима**, переходите к разделу "Подготовка Hekate" внизу страницы.

Теперь, когда консоль находится в RCM, нам нужно отправить на него payload. Методы в основном одинаковы, но слегка различаются в зависимости от того, какое оборудование у вас есть.


&nbsp;

=== "Windows"

    #### **Что вам нужно:**

    - Последняя версия <a href="https://github.com/eliboa/TegraRcmGUI/releases" target="_blank">TegraRcmGUI</a> (можно скачать MSI или zip)
    - Кабель USB-A на USB-C (или кабель USB-C на USB-C, если ваш компьютер поддерживает этот стандарт)
    - Последняя версия <a href="https://github.com/CTCaer/hekate/releases/" target="_blank">Hekate</a>. Payload Hekate (`hekate_ctcaer_(версия).bin`) находится внутри архива `hekate_ctcaer_(версия).zip`.

    #### **Инструкция:**

    1. Установите и запустите TegraRcmGUI.
    2. Перейдите на вкладку `Settings`, затем нажмите `Install Driver` и следуйте инструкциям на экране.
    - Если возникнут проблемы при установке драйвера, следуйте инструкциям в разделе [установка драйвера с помощью Zadig](#driver-installation-with-zadig) ниже.
    3. Подключите ваш Switch в режиме RCM к ПК с помощью USB-кабеля.
    4. Перейдите на вкладку `Payload` в TegraRcmGUI.
    - В левом нижнем углу должно появиться сообщение о том, что Switch обнаружен.
    5. Нажмите кнопку выбора файла рядом с `Inject payload`, выберите и укажите файл `hekate_ctcaer_X.X.X.bin`.
    6. Нажмите `Inject payload`, чтобы запустить выбранную полезную нагрузку.
    - Если payload был успешно загружен, на экране Switch появится жёлтый текст с надписью "Update bootloader folder!". Это будет исправлено в ближайшее время.

    #### **Установка драйвера с помощью Zadig**

    Следуйте этим шагам, если у вас возникли проблемы с установкой драйвера через TegraRcmGUI. Вам понадобится последняя версия <a href="https://zadig.akeo.ie" target="_blank">Zadig</a>.

    7. Запустите Zadig. В меню `Options` убедитесь, что включена опция `List All Devices`.
    8. Подключите ваш Switch в режиме RCM к ПК с помощью USB-кабеля.
    9. В Zadig выберите "APX" в списке устройств.
    10. В списке драйверов выберите `libusbK (v3.1.0.0)`.
    11. Нажмите `Install Driver` и дождитесь завершения установки.

=== "Linux"

    #### **Что вам нужно:**

    - Последняя версия [fusee-nano](https://github.com/DefenderOfHyrule/fusee-nano/releases) (также доступна на [AUR](https://aur.archlinux.org/packages/fusee-nano))
    - Если вы используете Arch Linux или дистрибутив, основанный на Arch, рекомендуется использовать пакет из AUR.
    - Кабель USB-A на USB-C (или кабель USB-C на USB-C, если ваш компьютер поддерживает этот стандарт)
    - Последняя версия <a href="https://github.com/CTCaer/hekate/releases/" target="_blank">Hekate</a>. Payload Hekate (`hekate_ctcaer_(версия).bin`) находится внутри архива `hekate_ctcaer_(версия).zip`.

    #### **Инструкция:**

    1. Скачайте и запустите загрузчик payload'a из терминала. Вам нужно будет запускать загрузчик от имени суперпользователя, если вы не следуете инструкциям по [инъекции в Linux без root прав](../../extras/adding_udev.md).
    2. Подключите ваш Switch в режиме RCM к ПК с помощью USB-кабеля.
    3. Запустите fusee-nano с помощью команды: `./fusee-nano /path/to/hekate-ctcaer_X.X.X.bin`
    - Как упоминалось ранее, если вы не следовали инструкциям по [инъекции в Linux без root прав](../../extras/adding_udev.md), это потребует root права. Для большинства систем это делается с помощью команды `sudo`.
    - Если payload был успешно загружен, на экране Switch появится жёлтый текст с надписью "Update bootloader folder!". Это будет исправлено в ближайшее время.

=== "Mac"

    #### **Что вам нужно:**

    - Последняя версия [CrystalRCM](https://github.com/prayerie/CrystalRCM/releases) (файл `CrystalRCM.(версия).dmg`)
    - Кабель USB-A на USB-C (или кабель USB-C на USB-C, если ваш компьютер поддерживает этот стандарт)
    - Последняя версия <a href="https://github.com/CTCaer/hekate/releases/" target="_blank">Hekate</a>. Payload Hekate (`hekate_ctcaer_(версия).bin`) находится внутри архива `hekate_ctcaer_(версия).zip`.

    #### **Инструкция:**

    1. Скачайте последнюю версию CrystalRCM.
    2. Подключите ваш Switch в режиме RCM к ПК с помощью USB-кабеля и убедитесь, что он также обнаруживается в CrystalRCM.
    3. Смонтируйте файл `CrystalRCM.(версия).dmg`, откройте смонтированный образ диска в Finder и скопируйте файл `CrystalRCM.app` из смонтированного образа в любое место на вашем Mac.
    4. Откройте приложение `CrystalRCM.app`, затем нажмите `Payload...` и выберите файл `hekate_ctcaer_X.X.X.bin`.
    5. После выбора нажмите `Push!`. Payload должен быть успешно загружен.
    - Если payload была успешно загружен, на экране Switch появится жёлтый текст с надписью "Update bootloader folder!". Это будет исправлено в ближайшее время.

=== "Android"

    #### **Что вам нужно:**

    - Последняя версия <a href="https://github.com/MenosGrante/Rekado/releases" target="_blank">Rekado</a>
    - Вам нужно будет включить "Неизвестные источники" в настройках устройства для установки этого приложения.
    - Кабель USB-C
    - Если ваше устройство имеет порт USB-C, вы можете использовать кабель USB-C на USB-C
    - Если у вашего устройства есть только порт Micro USB, вам понадобится адаптер USB OTG и кабель USB-A на USB-C
    - Это **не будет работать** на каждом телефоне!
    - Последняя версия <a href="https://github.com/CTCaer/hekate/releases/" target="_blank">Hekate</a>. Payload Hekate (`hekate_ctcaer_(версия).bin`) находится внутри архива `hekate_ctcaer_(версия).zip`.

    #### **Инструкция:**

    1. Скопируйте файл hekate_ctcaer `.bin` из архива Hekate в любое место на вашем телефоне.
    - Для этого можно использовать такие инструменты, как Amaze File Manager.
    2. Запустите Rekado на своем телефоне.
    3. Перейдите в раздел `Payloads` (обозначен вниз стрелкой с линией), затем нажмите кнопку `+` в правом нижнем углу.
    4. Найдите свой файл hekate_ctcaer `.bin` и коснитесь его, чтобы добавить его в меню Rekado.
    5. **Необязательно, но рекомендуется**: Перейдите в настройки Rekado в правом верхнем углу и включите `Hide bundled`.
    6. Подключите ваш Switch в режиме RCM к вашему телефону с помощью USB-кабеля.
    7. Если будет предложено, предоставьте Rekado доступ к Switch.
    8. Выберите файл `hekate_ctcaer_X.X.X.bin` в появившемся диалоговом окне.
    - Если payload был успешно загружен, на экране Switch появится жёлтый текст с надписью "Update bootloader folder!". Это будет исправлено в ближайшее время.

=== "Chromebook"

    #### **Что вам нужно:**

    - Кабель USB-A на USB-C
    !!! warning "Об USB-C"
        Если у вашего Chromebook есть порт USB-C, имейте в виду, что это не сработает с кабелем USB-C на USB-C.

    #### **Инструкция:**

    1. Перейдите на сайт для инъекции [инъекции](https://fusee.eiphax.tech/) и прокрутите вниз.
    2. Откройте выпадающее меню и выберите `hekate_ctcaer_X_X_X` из списка.
    3. Подключите ваш Switch в режиме RCM к вашему Chromebook с помощью USB-кабеля.
    4. Выберите "Deliver Payload". Появится всплывающее окно. Нажмите на опцию `APX`.
    5. Нажмите кнопку "Connect", и payload будет инъецирован.
        - Если payload была успешно загружен, на экране Switch появится жёлтый текст с надписью "Update bootloader folder!". Это будет исправлено в ближайшее время.

!!! danger "Если ничего не происходит после отправки payload'a"
    Если экран вашей консоли остаётся чёрным после того, как вы отправили Hekate (или любой другой payload), возможно, ваш payload был повреждён или ваша консоль пропатчена. Если программа инъектора payload показывает, что ноль или 0x0000 байт были отправлены, то это значит, что она пропатчена. Это не временная ошибка и не подлежит обсуждению; консоль пропатчена. Рассмотрите альтернативный метод, который не требует RCM.


-----

### **Подготовка Hekate**
Мы подготовим microSD-карту к форматированию/разделению перед переходом на следующую страницу. Извлекать microSD-карту во время работы Hekate безопасно, поэтому выключать консоль не обязательно; её включение сэкономит время, которое ушло бы на повторную инъекцию payload'a.

!!! danger "Следуя этому руководству, вы удалите всё на вашей microSD-карте!"
    Позже в руководстве вы будете форматировать и/или разделять вашу microSD-карту. Это означает, что все данные на microSD-карте будут потеряны. Сейчас хорошее время, чтобы сделать резервную копию *всех* данных в безопасное место (например, на вашем ПК или внешнем диске), чтобы вы могли восстановить их позже. Вы можете сделать это, следуя инструкциям ниже.


-----

#### **Что вам нужно:**
- Последняя версия <a href="https://github.com/CTCaer/hekate/releases/" target ="_blank">Hekate</a>.
- Ваша microSD-карта.

#### **Инструкции:**
1. Не выключая ваш Switch, извлеките microSD-карту из устройства.
2. Вставьте microSD-карту в ваш компьютер.
3. Скопируйте папку `Nintendo` (и любые другие важные данные) с корня вашей microSD-карты в безопасное место на вашем устройстве.
4. Извлеките Hekate `.zip` в любое место на вашем компьютере.
5. Внутри извлеченной папки Hekate вы найдете папку с названием `bootloader`.
6. Скопируйте папку `bootloader` в корень вашей microSD-карты.
7. Верните microSD-карту обратно в вашу Switch.
8. Нажмите любую кнопку, чтобы продолжить в меню Hekate.
9. Используйте кнопки увеличения и уменьшения громкости, чтобы управлять в меню Hekate. Наведите курсор на 'reload' и нажмите кнопку питания для выбора. На экране теперь должно появиться графическое меню Hekate (Nyx), изображенное ниже.

    ![Nyx](../all/img/nyx.bmp){ width="600" }


[Перейти к выбору среды для CFW :material-arrow-right:](../all/cfw_environment.md){ .md-button .md-button--primary }
