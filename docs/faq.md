### **Какие версии прошивки в настоящее время поддаются взлому?**

На данный момент существует две аппаратные ревизии Switch. Любая консоль Switch, купленная или произведенная до середины 2018 года, имеет уязвимость в загрузочном ПЗУ (bootrom), которая позволяет запускать произвольный код независимо от версии прошивки на консоли. Однако при обновлении системы Nintendo обычно требуется обновить кастомную прошивку (CFW), чтобы она работала с новой версией.

Этот баг не может быть исправлен Nintendo после того, как консоль покидает завод, если только консоль не будет отправлена на ремонт. Это означает, что на старой ревизии оборудования все текущие и будущие версии прошивок смогут запускать CFW с помощью этого эксплойта.

Любая консоль, купленная после примерно августа 2018 года, **скорее всего** будет с исправленной уязвимостью. Включая последние модели на полках магазинов, известные как 'red box' или 'Mariko'.
Mariko имеет аппаратное исправление, но может поставляться с уязвимой прошивкой.

В данный момент единственный способ узнать, можно ли взломать вашу консоль Switch, — это попробовать отправить полезную нагрузку в RCM (Recovery Mode).

Даже с исправлением этого эксплойта, многие консоли Switch с прошивкой 8.0.1 и ниже смогут быть взломаны в какой-то степени в будущем (см. раздел Стоит ли обновлять прошивку? для более подробной информации).

Серийный номер на задней стороне коробки может подсказать, какие консоли исправлены, а какие нет. Посмотрите актуальный список <a href="https://gbatemp.net/threads/switch-informations-by-serial-number.481215/" target="_blank">здесь</a>.


### **Как использовать fusee-gelee? Как загрузиться в RCM?**

Для запуска кастомной прошивки (CFW) через fusee-gelee, необходимо перевести Switch в "Режим восстановления" (ReCovery Mode, RCM).  
Самый простой способ войти в RCM — это заземлить контакт 10 на правом рельсе джойкона и удерживать кнопку увеличения громкости (VOL+) при включении.  
Существует несколько методов и конструкций для этого, подробности можно найти в [нашем гайде](user_guide/rcm/entering_rcm.md).  
После того как Switch войдет в RCM, его нужно подключить к компьютеру, телефону или специальному устройству (dongle) для отправки эксплойта и полезной нагрузки.

Эту процедуру необходимо выполнять каждый раз, когда Switch загружается из полностью выключенного состояния, иначе консоль загрузится в стандартную прошивку.


### Что делает хороший джиг хорошим? Можно ли использовать скрепку?

Большинство людей предпочитают использовать напечатанные на 3D-принтере джиги для входа в RCM.  
Эти джиги создаются таким образом, что они вставляются в правый рельс джойкона и имеют кусок проволоки, который соединяет контакт 10 с одним из заземленных контактов на Switch.  
Существует много различных дизайнов этих джигов, но важно понимать, что плохо сделанный джиг может повредить Switch.

Поскольку проволока в джиге должна касаться контактных площадок внутри рельса джойкона Switch, важно использовать проволоку, которая тонкая, не жесткая и согнутая/не острая.  
Скрепки могут быть опасными в качестве джигов, так как они сделаны из жесткого материала, твердые и острые, и могут легко поцарапать контактные площадки внутри Switch.  
Хороший джиг использует проволоку толщиной 32 калибра (диаметр 0.2 мм) и согнут таким образом, чтобы конец проволоки не царапал площадки.  
Вы можете скачать и напечатать свой собственный джиг на 3D-принтере, а изображения на [этом сайте](https://www.thingiverse.com/thing:2892320) помогут вам правильно согнуть проволоку.  
Готовые джиги можно найти на онлайн-площадках по низкой цене.


### Есть ли более простой способ войти в RCM?

Для более удобного входа в RCM существует решение под названием "AutoRCM".  
После настройки этого метода Switch всегда будет загружаться в RCM, даже без джига или удержания кнопок.  
Это работает за счет контролируемого "окирпичивания" консоли.  
Switch определяет, что что-то не так, и загружается в RCM для восстановления.  
Главный недостаток этого метода заключается в том, что невозможно загрузить Switch без компьютера, телефона или донгла, так как консоль никогда не загрузится в стандартную прошивку самостоятельно. Также для работы всегда требуется SD-карта с правильными файлами CFW.  
Кроме того, если батарея Switch полностью разряжена, консоль должна зарядиться как минимум до 10% в Hekate перед запуском Atmosphere, иначе Switch откажется загружаться из-за низкого заряда. Зарядка в RCM не рекомендуется, так как она очень медленная.  
AutoRCM можно отключить, но рекомендуется сделать рабочие резервные копии NAND и BOOT0/1 перед его использованием.

Многие Android-смартфоны могут отправлять эксплойт на Switch, что делает их идеальным портативным способом для запуска CFW.  
Существует несколько различных дизайнов портативных донглов, начиная от проектов на основе Raspberry Pi Zero и Arduino и заканчивая внутренними донглами, которые работают полностью автономно. Последние подходят только для продвинутых пользователей, так как требуют пайки на материнскую плату Switch.


### Стоит ли обновлять прошивку?

Если ваш Switch относится к новым аппаратным ревизиям, в которых был исправлен эксплойт для RCM, и у вас прошивка 7.0.1 или ниже, то не стоит обновляться, если вы хотите иметь возможность использовать CFW в обозримом будущем.

Если ваш Switch — одна из старых аппаратных ревизий, и вас не смущает необходимость использовать джиги/хардмоды/AutoRCM и отправлять эксплойт через компьютер, телефон или донгл каждый раз, когда вы хотите запустить CFW, то обновляться совершенно безопасно.  
Если вы хотите иметь шанс однажды обходиться без внешних устройств, то рекомендуется оставаться на как можно более низкой версии прошивки.  
Имейте в виду, что для этого, возможно, придется ждать очень долго (месяцы или годы), если это вообще когда-либо случится. Известно, что существуют приватные эксплойты для запуска CFW через браузер на прошивках до версии 7.0.1.


Downgrade прошивки на Switch возможен, но для этого требуется использование AutoRCM и загрузка кастомного загрузчика для обхода нескольких аппаратных механизмов защиты от понижения версии.  
Это не сработает на неподверженных взлому системах и практически бесполезно для большинства пользователей.  
При каждой загрузке прошивка Switch проверяет, сколько e-fuses (электронных предохранителей) было сожжено и сколько должно быть сожжено по ожиданиям системы.  
Основные обновления Switch или обновления, в которых была исправлена серьезная уязвимость, необратимо сжигают один из 64 e-fuses консоли.  
*Если Switch когда-либо обнаружит, что было сожжено больше e-fuses, чем ожидается (то есть произошел даунгрейд), консоль откажется загружаться. Заменить e-fuses невозможно.*  
Больше информации о предохранителях можно найти <a href="https://switchbrew.org/wiki/Fuses#Anti-downgrade" target="_blank">здесь</a>.

Atmosphère поддерживается для работы с последними обновлениями прошивки на незащищенных устройствах. Ситуация для исправленных и новых устройств следующая:

- **"Старый"** *Исправленный Switch (HAC-001): НЕ обновляйтесь выше версии 7.0.1. Устройства на 7.0.1 и ниже со временем получат поддержку CFW. Исправленные устройства, обновленные до 8.0.0 или 8.0.1, вероятно, смогут запускать homebrew.*

- **"Новый"** *Switch (HAC-001(-01)): НЕ обновляйтесь выше версии 8.0.1. Устройства на 8.0.1 и ниже, вероятно, получат поддержку homebrew. Устройства на версии 8.1.0 и выше не ожидается, что будут взломаны, и их можно обновлять.*

- **Switch Lite** *(HDH-001): НЕ обновляйтесь выше версии 8.0.1. Устройства на 8.0.1 и ниже, вероятно, получат поддержку homebrew. Устройства на версии 8.1.0 и выше не ожидается, что будут взломаны, и их можно обновлять.*

Существует метод обновления без сжигания e-fuses, но, как и в случае с даунгрейдом, это заставляет вас использовать AutoRCM и отправлять эксплойт через USB каждый раз, так как даже одна загрузка в стандартную прошивку мгновенно сожжет e-fuse.  
Учтите, что существуют и другие механизмы защиты от даунгрейда, которые, например, делают невозможным запуск игровых картриджей на прошивке ниже 4.1/9.0.0, если Switch когда-либо запускал игры на прошивке 4.1+/9.0.0+. Это можно обойти только полным отключением слота для картриджей на версиях 4.1/9.0.0 или выше, что также непрактично для большинства пользователей.



### Безопасно ли использовать homebrew? Могут ли меня забанить?

Консоль Switch содержит множество телеметрии, и некоторые известные разработчики называли её "монстром телеметрии".  
Пока Switch подключен к интернету, Nintendo получает отчеты о различных действиях и состояниях системы и может записывать или реагировать на них.  
Даже если Switch был офлайн и подключился к интернету позже, Nintendo все равно получит информацию о том, что происходило, пока консоль была отключена.

Чтобы отключить часть этой телеметрии, рекомендуется отключить отправку отчетов об ошибках в настройках системы Switch.  
Дополнительно, если вы живете в ЕС, вы можете установить опцию "не делиться" на <a href="https://accounts.nintendo.com/setting" target="_blank">веб-сайте Nintendo</a>, чтобы предотвратить отправку большого объема телеметрии вашей консолью, хотя эффективность этого шага остается под вопросом.

Nintendo по-прежнему получает много информации, даже если эти опции отключены. Мы также не можем знать, решит ли Nintendo проверить что-то в логах и забанить пользователей ретроспективно. Кроме того, они показывают, что расширяют свои телеметрические опции с каждым обновлением прошивки.

!!! warning "На данный момент все баны были связаны с очень очевидными и вторгающимися действиями, а именно:"
    - Разработчики, использующие уникальные данные Switch для анализа и обратной разработки ответов серверов Nintendo
    - Люди, которые пиратят игры и используют их онлайн
    - Люди, изменяющие свои фотографии профиля на пользовательские изображения
    - Люди, использующие редакторы сохранений для разблокировки контента, который еще не доступен, и использующие его онлайн (Splatoon 2)
    - Люди, занимающиеся читерством в интернете в общем (Модификация статистики карт в MK8)
    - Люди, устанавливающие homebrew NSP файлы, что Nintendo может обнаружить с помощью своей телеметрии


Atmosphère блокирует часть, но ***не всю*** телеметрию Nintendo и предотвращает отправку отчетов о сбоях. 
Это означает, что Nintendo не может определить, произошел ли сбой в какой-либо программе, включая homebrew или модифицированные игры, и Atmosphère сохраняет журнал сбоя на microSD-карту для помощи разработчикам homebrew.
Тем не менее, Nintendo все равно получает информацию о том, что воспроизводится, и общую системную информацию.


Atmosphère не является панацеей, и это не значит, что Nintendo не решит забанить пользователей за безвредный homebrew в будущем. Если вы боитесь бана, то пока лучше не использовать homebrew. В настоящее время Atmosphère поддерживает emuMMC (emuNAND): копию системного программного обеспечения Switch, которая работает полностью с microSD-карты.
Это устраняет риски бана, так как emuMMC работает в изолированном, офлайн-состоянии, не затрагивая внутреннюю память. Вы по-прежнему можете загрузиться в оригинальную прошивку для игры онлайн.

Для исправленных устройств, использующих deja-vu, sysNAND всегда должен быть на прошивке ниже 4.1. Для версий Switch с прошивками от 5.0 до 7.0.1 deja-vu еще не доступен, но появится со временем. (Также обратите внимание, что прошивки 8.0.0 и выше никогда не будут работать с deja-vu.) Вы можете использовать обновленный emuMMC, предназначенный для онлайн/чистой игры, в то время как ваш sysNAND будет использоваться офлайн для кастомной прошивки.

Мы не рекомендуем использовать ReiNX или SX OS по многим причинам, главным из которых является то, что они используют множество ресурсов от Atmosphère и не предлагают реальных преимуществ, которые не предоставляются Atmosphère.  
Также не рекомендуется использовать Kefir, поскольку большое количество дополнительных функций на основе обычного Atmosphère затрудняет решение необычных проблем.  
Все эти альтернативные CFW также склонны использовать неконвенциональные настройки, которые могут вызывать проблемы, что затрудняет их решение, что является еще одной причиной, почему мы предпочитаем использовать чмсиуб Atmosphère.  

Дополнительно рекомендуется использовать 90DNS, который блокирует соединения с серверами Nintendo. Если вы используете emuNAND для CFW и держите свой sysNAND чистым для игр онлайн, вы должны использовать 90DNS на вашем emuNAND.
Или же довериться стандартным настройкам Ultra-NX она уже использует функционал блокировки подключения к серверам Nintendo с помощью стандартных механизмов Atmosphère.  
*Примечание: Держать ваш emuNAND "грязным" и sysNAND "чистым" относится в первую очередь к тем, кто использует эксплойт RCM. Пользователи, использующие Nereba или Caffeine, будут делать наоборот.*


### Какие форматы могут использоваться для homebrew

Homebrew может быть в двух разных форматах: `nro` и `bin`.

- **`nro` Файлы** размещаются в папке `switch` на вашей microSD-карте и могут быть запущены через Homebrew Menu.
- **`bin` Файлы** используются в качестве полезной нагрузки и должны быть загружены в RCM с помощью загрузчика полезных нагрузок, такого как tegrarcmgui на Windows и fusee-interface-tk на других операционных системах или же Hekate на консолях с установленным мод-чипом.

**Риски использования homebrew**  
*Будьте осторожны при запуске загруженного homebrew! Если вы не знаете источник, лучше не запускать его.*  
*Homebrew может потенциально повредить вашу систему! Atmosphère предоставляет защиту от распространенных методов "окирпичивания", но эти защиты не гарантируют стопроцентную безопасность!*
*Homebrew постовляемые в формате `.nsp` опасны! Этот формат отличается от `.nro` лишь тем что может быть установлен в главное меню, его установка может привести к бану.*

### Какую microSD карту/формат использовать?

microSD карты объемом 32 ГБ или меньше можно использовать для homebrew, но не рекомендуется, так как они не позволят иметь полный дамп NAND и/или emuMMC.

Рекомендуемый размер microSD карты — 128 ГБ. Это позволит сделать полный дамп NAND, а также иметь достаточно места для запуска emuNAND в будущем, при этом оставаясь с адекватным пространством для homebrew.

Рекомендуемый файловый формат — FAT32. Хотя Switch поддерживает exFAT через дополнительное обновление от Nintendo, эта файловая система подвержена повреждениям и, следовательно, не рекомендуется.




### Поддельные microSD карты

Не покупайте microSD карты на таких сайтах, как Aliexpress.  
Эти карты часто бывают поддельными и не имеют заявленного объема хранения, что может привести к повреждению данных при использовании.  
Ozon также сталкивался с проблемами с поддельными microSD картами, поэтому мы рекомендуем покупать их в физических магазинах. Даже на надежных сайтах *всегда, всегда проверяйте отзывы о продукте перед покупкой!!*

Если вы подозреваете, что ваша microSD карта поддельная или поврежденная, следуйте инструкциям <a href="https://wiki.hacks.guide/wiki/Checking_SD_card_integrity" target="_blank">здесь</a> для проверки целостности вашей microSD карты.





### Мои приложения Homebrew не отображаются в Homebrew menu!

Это проблема в первую очередь затрагивает пользователей macOS, но может возникать и на других устройствах. Если вы можете запустить Homebrew menu, но не видите некоторые или все ваши приложения Homebrew, возможно, вам нужно сбросить архивный бит с помощью Hekate.

1. Запустите payload Hekate с помощью вашего любимого загрузчика payload'ов.
    - Если у вас есть модифицированный Switch, поместите payload Hekate в корневую директорию вашей microSD карты и переименуйте её в payload.bin, вставьте microSD карту обратно в Switch и включите его.
2. Нажмите `Tools` на верхней панели меню.
3. В нижнем правом углу нажмите `Arch Bit • AutoRCM • Touch • Pkg1/2`.
4. Нажмите `Fix Archive bit` — это может занять некоторое время.
5. Нажмите `Close` в верхнем правом углу.
6. Нажмите `Home` на верхней панели меню, чтобы вернуться в исходное меню.
7. Следуйте инструкциям на странице запуска CFW [здесь](user_guide/all/launching_cfw.md), чтобы запустить Atmosphere.

